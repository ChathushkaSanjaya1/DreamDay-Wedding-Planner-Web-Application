@{
    ViewData["Title"] = "Wedding Timeline";
}

@section Styles {
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #f5f7fa;
        }

        .sidebar {
            background: linear-gradient(180deg, #3F51B5 0%, #5C6BC0 100%);
            color: #fff;
            min-height: 100vh;
        }

            .sidebar .nav-link {
                color: #e0e0e0;
                font-weight: 500;
            }

                .sidebar .nav-link:hover {
                    background-color: rgba(255, 255, 255, 0.1);
                }

                .sidebar .nav-link.active {
                    background-color: #fff;
                    color: #3F51B5 !important;
                    font-weight: bold;
                    border-radius: 8px;
                }

        .timeline-event {
            border-left: 4px solid #3F51B5;
            padding-left: 15px;
            margin-bottom: 1.5rem;
        }

            .timeline-event h6 {
                margin-bottom: 0.25rem;
                font-weight: bold;
                color: #3F51B5;
            }

            .timeline-event small {
                color: #888;
            }

        .btn-add {
            background-color: #3F51B5;
            color: white;
        }

            .btn-add:hover {
                background-color: #303F9F;
            }
    </style>
}

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <nav class="col-12 col-md-3 col-lg-2 sidebar p-4">
            <h4 class="fw-bold text-white mb-4"><i class="fas fa-gem me-2"></i>DreamDay</h4>
            <ul class="nav flex-column">
                <li class="nav-item"><a class="nav-link" asp-controller="Home" asp-action="Dashboard"><i class="fas fa-home me-2"></i>Dashboard</a></li>
                <li class="nav-item"><a class="nav-link" asp-controller="Home" asp-action="Checklist"><i class="fas fa-check-circle me-2"></i>Checklist</a></li>
                <li class="nav-item"><a class="nav-link" asp-controller="Home" asp-action="Budget"><i class="fas fa-wallet me-2"></i>Budget</a></li>
                <li class="nav-item"><a class="nav-link" asp-controller="Home" asp-action="Guests"><i class="fas fa-users me-2"></i>Guests</a></li>
                <li class="nav-item"><a class="nav-link" asp-controller="Home" asp-action="Dahboard_Vendors"><i class="fas fa-store me-2"></i>Vendors</a></li>
                <li class="nav-item"><a class="nav-link active" asp-controller="Home" asp-action="Timeline"><i class="fas fa-calendar-alt me-2"></i>Timeline</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="col-12 col-md-9 col-lg-10 px-4 py-5">
            <h2 class="fw-bold text-primary mb-4"><i class="fas fa-calendar-alt me-2"></i>Wedding Day Timeline</h2>

            <div class="card p-4 shadow-sm mb-4">
                <h5 class="mb-3">Add New Event</h5>
                <div class="row g-3 mb-3">
                    <div class="col-md-3">
                        <input type="time" class="form-control" id="event-time" />
                    </div>
                    <div class="col-md-7">
                        <input type="text" class="form-control" id="event-desc" placeholder="e.g., Makeup Session" />
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-add w-100" onclick="addEvent()"><i class="fas fa-plus me-1"></i> Add</button>
                    </div>
                </div>
            </div>

            <div class="card p-4 shadow-sm">
                <h5 class="mb-4">Timeline</h5>
                <div id="timeline-container">
                    <!-- Events will be rendered here -->
                </div>
            </div>
        </main>
    </div>
</div>

@section Scripts {
    <script>
        let timeline = JSON.parse(localStorage.getItem("dreamdayTimeline")) || [];

        function renderTimeline() {
            const container = document.getElementById("timeline-container");
            container.innerHTML = "";

            timeline
                .sort((a, b) => a.time.localeCompare(b.time))
                .forEach((event, index) => {
                    container.innerHTML += `
                        <div class="timeline-event">
                            <h6>${event.time}</h6>
                            <p>${event.desc}</p>
                            <small><a href="#" onclick="removeEvent(${index})">Remove</a></small>
                        </div>
                    `;
                });

            localStorage.setItem("dreamdayTimeline", JSON.stringify(timeline));
        }

        function addEvent() {
            const time = document.getElementById("event-time").value;
            const desc = document.getElementById("event-desc").value.trim();

            if (time && desc) {
                timeline.push({ time, desc });
                document.getElementById("event-time").value = "";
                document.getElementById("event-desc").value = "";
                renderTimeline();
            } else {
                alert("Please provide both time and description.");
            }
        }

        function removeEvent(index) {
            timeline.splice(index, 1);
            renderTimeline();
        }

        renderTimeline();
    </script>
}
