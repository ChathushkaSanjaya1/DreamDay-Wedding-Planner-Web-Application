@{
    ViewData["Title"] = "Reports & Analytics";
}

@section Styles {
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #f5f7fa;
        }

        .sidebar {
            background: linear-gradient(180deg, #1E88E5 0%, #3949AB 100%);
            color: #fff;
            min-height: 100vh;
        }

            .sidebar .nav-link {
                color: #e0e0e0;
                font-weight: 500;
            }

                .sidebar .nav-link.active {
                    background-color: #fff;
                    color: #3949AB !important;
                    font-weight: bold;
                    border-radius: 8px;
                }

        .chart-card {
            background: #fff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
    </style>
}

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <nav class="col-12 col-md-3 col-lg-2 sidebar p-4">
            <h4 class="fw-bold text-white mb-4"><i class="fas fa-user-shield me-2"></i>Admin</h4>
            <ul class="nav flex-column">
                <li class="nav-item"><a class="nav-link" asp-controller="Admin" asp-action="Index"><i class="fas fa-tachometer-alt me-2"></i>Dashboard</a></li>
                <li class="nav-item"><a class="nav-link" asp-controller="Admin" asp-action="Users"><i class="fas fa-users me-2"></i>Users</a></li>
                <li class="nav-item"><a class="nav-link" asp-controller="Admin" asp-action="Vendors"><i class="fas fa-store me-2"></i>Vendors</a></li>
                <li class="nav-item"><a class="nav-link" asp-controller="Admin" asp-action="Weddings"><i class="fas fa-calendar-alt me-2"></i>Weddings</a></li>
                <li class="nav-item"><a class="nav-link active" asp-controller="Admin" asp-action="Reports"><i class="fas fa-chart-bar me-2"></i>Reports</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="col-12 col-md-9 col-lg-10 px-4 py-5">
            <h2 class="fw-bold text-primary mb-4"><i class="fas fa-chart-bar me-2"></i>Reports & Analytics</h2>

            <div class="row g-4">
                <!-- Weddings by Status -->
                <div class="col-lg-6">
                    <div class="chart-card">
                        <h6 class="fw-bold mb-3">Weddings by Status</h6>
                        <canvas id="weddingStatusChart" height="200"></canvas>
                    </div>
                </div>

                <!-- Monthly Bookings -->
                <div class="col-lg-6">
                    <div class="chart-card">
                        <h6 class="fw-bold mb-3">Monthly Wedding Bookings</h6>
                        <canvas id="monthlyBookingsChart" height="200"></canvas>
                    </div>
                </div>

                <!-- Vendor Distribution -->
                <div class="col-lg-12">
                    <div class="chart-card">
                        <h6 class="fw-bold mb-3">Vendor Category Distribution</h6>
                        <canvas id="vendorDistributionChart" height="120"></canvas>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Weddings by Status (Doughnut)
        new Chart(document.getElementById('weddingStatusChart'), {
            type: 'doughnut',
            data: {
                labels: ['Upcoming', 'Completed', 'Cancelled'],
                datasets: [{
                    data: [15, 9, 2],
                    backgroundColor: ['#42A5F5', '#66BB6A', '#EF5350']
                }]
            },
            options: {
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });

        // Monthly Bookings (Line)
        new Chart(document.getElementById('monthlyBookingsChart'), {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Bookings',
                    data: [4, 7, 6, 10, 12, 9],
                    fill: true,
                    borderColor: '#1E88E5',
                    backgroundColor: 'rgba(30,136,229,0.1)',
                    tension: 0.4
                }]
            },
            options: {
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });

        // Vendor Distribution (Bar)
        new Chart(document.getElementById('vendorDistributionChart'), {
            type: 'bar',
            data: {
                labels: ['Venues', 'Catering', 'Photography', 'Florists', 'Music/DJ'],
                datasets: [{
                    label: 'Vendors',
                    data: [12, 8, 14, 6, 5],
                    backgroundColor: ['#3F51B5', '#FFA726', '#AB47BC', '#66BB6A', '#26C6DA']
                }]
            },
            options: {
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            stepSize: 2
                        }
                    }
                }
            }
        });
    </script>
}
